angular.module("schemaForm").run(["$templateCache",function(r){r.put("directives/decorators/bootstrap/file/file.html",'<div class="form-group" ng-controller="FileCtrl" ng-class="{\'has-error\': hasError()}"><label class="control-label" ng-show="showTitle()">{{form.title}}</label><span ng-if="!$$value$$ && !uploading"><input ng-show="form.key" style="background-color: white" type="file" class="form-control" ng-file-select="onFileSelect($files)"></span><div class="form-control" ng-if="uploading && progress < 100"><div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%"><span class="sr-only">{{progress}}% Complete</span></div></div></div><span ng-if="$$value$$ && !uploading"><div class="form-control"><a href="{{$$value$$.url}}" target="_blank">{{$$value$$.originalFilename}}</a><button class="btn btn-xs btn-danger" ng-click="$$value$$ = null">מחק קובץ</button></div></span> <span class="help-block">{{ (hasError() && errorMessage(schemaError())) || form.description}}</span></div>')}]),angular.module("schemaForm").config(["schemaFormProvider","schemaFormDecoratorsProvider","sfPathProvider",function(r,e,o){var a=function(e,a,l){if("object"===a.type&&"file"===a.format){var s=r.stdFormObj(e,a,l);return s.key=l.path,s.type="file",l.lookup[o.stringify(l.path)]=s,s}};r.defaults.string.unshift(a),e.addMapping("bootstrapDecorator","file","directives/decorators/bootstrap/file/file.html"),e.createDirective("file","directives/decorators/bootstrap/file/file.html")}]),angular.module("schemaForm").controller("FileCtrl",["$scope","$upload",function(r,e){r.uploading=!1,r.onFileSelect=function(o){r.uploading=!0;for(var a=0;a<o.length;a++){var l=o[a];r.upload=e.upload({url:"/upload",method:"POST",file:l}).progress(function(e){r.progress=parseInt(100*e.loaded/e.total)}).success(function(e){r.model[r.form.key[0]]=e,r.uploading=!1})}}}]);